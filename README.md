# Установка
Для установки скачайте архив репозитория, скачайте распакуйте, установите python 3.8 выполните команду:

`pip install -r requirements.txt`

Для анализа текстовых файлов поместите их в папку с программой или укажите путь **файлы должны быть закодированы UTF-8**


Результаты выполнения будут находится в файле `result.txt` 


# Инструкция по эксплуатации
Запуск программы происходит в таком виде:

`python main.py [-h] [--FL_optional FL_OPTIONAL] file1 file2 metrica`

По команде [-h] вызывается инструкция по использованию программы, для вызова инструкции введите:

`python main.py -h`

Для запуска программы введите `python main.py file1 file2 metrica`

Где *file1* - путь к первому файлу c форматом(Ввод осуществляется обязательно с форматом .txt), *file2* 
путь ко второму файлу (Ввод осуществляется обязательно с форматом .txt)
После этого вводится процент сходства со знаком сравнения обязательно в двойных кавычках (например *"=100"*).
Где:

- " = " - в результате будут все равные значения
- " > " - результатом будут значения больше заданного 
- " < " - результатом будут значения меньше заданного

Программа по умолчанию ищет совпадению полность по ФИО,
есть возможность разделить с помощью необезательного аргумента --FL_optional, пример:

`python main.py --FL_optional=1 example1.txt example2.txt "=100"`

Где: 
- --FL_optional=1 поиск соответсвия только по фамилии
- --FL_optional=2 поиск соответсвия только по фамилии и имени
- --FL_optional=3 Поиск полностью по ФИО, это значение стоит по умолчанию 


Если в файле находится пустая строка или формат строки не соответсвующий ФИО,
 программа выведет ошибку, но поиск совпадений продолжится.
 Пример вывода:
 
```
-- Проверка файлов на соотвествие формату ФИО ---
--- WARNING ---
 Проверка файлов не прошла, один из файлов несоответсвует формату ФИО, вычисление продолжается
--- WARNING ---
```

Если проверка на пустые строки и соответсвие формату ФИО пройдет успешно
, то будет выведено:

```
--- Проверка файлов на соотвествие формату ФИО ---
--- Проверка прошла успешно! ---
```
# Тесты

Для запуска unit тестирования из папки tests введите в командной строке:

`python test_unit.py`

Так же есть возможность сравнения методов для нечеткого поиска, их можно вызвать:
- `python test_fuzzywuzzy.py` Тест на время метода из библиотеки fuzzywuzzy
- `python test_fuzzyset.py` Тест на время метода из библиотеки fuzzyset
- `python test_difflib_matching.py` Тест на время метода из библиотеки difflib
- `python test_clear_fucntion_levenshtein.py` Тест на время чистого метода функции Левенштейна

# Изменения 

1. Прошлая реализация неэффективно расходовала оперативную память и было принято решение
переписать функцию с реализацией через чтение файлов, что не загружает оперативную память.
2. Вместо библиотеки fuzzyset было принято решение использовать библиотеку fuzzywuzzy
из-за разницы в скорости. Разница ~10 раз. Ранее программа тестировалась на 
маленьких файлах, где разница в скорости была не большой. На больших файлах 
разница оказалась большой.
3. Вычисление совпадений было вынесено в отдельную функцию **matching**
для возможности добавления более быстрого метода в последующих реализациях
4. Была вынесена в отдельную функцию проверка аргумента **metrica** в функцию **check_matching**
5. Была создана функция **split_function** 
для вычисления: 1-Отдельно фамилии, 2-Отдельно фамилии и имени, 3-Всего ФИО
6. Был добавлен класс **FLException** для проверки файла на пустые строки и формат ФИО
7. Программа стала коснольной утилитой, появилась возможность
 использования из командной строки с заданными аргументами
8. Было добавлено тестирование по методам и unit тестирование.